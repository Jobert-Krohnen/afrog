import"../chunks/DsnmJJEf.js";import"../chunks/DlLHrE1O.js";import{an as Y,h as Z,r as ee,ao as fe,e as y,v as ce,ap as ue,g as V,aj as ae,k as q,o as b,i as F,j as w,R as ve,D as me,t as J,m as u,G as E,l as $,P as d,Q as f,n as ge,F as p,u as K,am as pe}from"../chunks/d6p2qzFS.js";import{e as _e,s as O}from"../chunks/CbgQDXU4.js";import{i as M}from"../chunks/CqEH5XQL.js";import{r as U,a as B}from"../chunks/IYcDQX8J.js";import{b as D}from"../chunks/BF9DKBmX.js";import{p as L,r as G,b as be,a as xe,s as he}from"../chunks/CDrO6Nwr.js";import{c as N,I as ye,L as we,B as ke,s as $e}from"../chunks/FQHButMJ.js";import{g as Le}from"../chunks/BVI9IzGI.js";import{a as Pe,A as Se}from"../chunks/LukD1BGS.js";import{$ as je}from"../chunks/COvrzUmD.js";import{s as Ae}from"../chunks/BRfHTNaP.js";function X(e,a,s=a){var c=fe(),v=new WeakSet;Y(e,"input",r=>{var t=r?e.defaultValue:e.value;if(t=z(e)?I(t):t,s(t),y!==null&&v.add(y),c&&t!==(t=a())){var x=e.selectionStart,m=e.selectionEnd;e.value=t??"",m!==null&&(e.selectionStart=x,e.selectionEnd=Math.min(m,e.value.length))}}),(Z&&e.defaultValue!==e.value||ce(a)==null&&e.value)&&(s(z(e)?I(e.value):e.value),y!==null&&v.add(y)),ee(()=>{var r=a();if(e===document.activeElement){var t=ue??y;if(v.has(t))return}z(e)&&r===I(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function z(e){var a=e.type;return a==="number"||a==="range"}function I(e){return e===""?null:+e}function Ee(e,a,s=a){Y(e,"change",()=>{s(e.files)}),Z&&e.files&&s(e.files),ee(()=>{e.files=a()})}var ze=w("<input/>"),Ie=w("<input/>");function Me(e,a){V(a,!0);let s=L(a,"ref",15,null),c=L(a,"value",15),v=L(a,"files",15),r=G(a,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var t=ae(),x=q(t);{var m=i=>{var l=ze();U(l),B(l,o=>({"data-slot":"input",class:o,type:"file",...r}),[()=>N("selection:bg-primary dark:bg-input/30 selection:text-primary-foreground border-input ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 pt-1.5 text-sm font-medium outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a.class)]),D(l,o=>s(o),()=>s()),Ee(l,v),X(l,c),b(i,l)},_=i=>{var l=Ie();U(l),B(l,o=>({"data-slot":"input",class:o,type:a.type,...r}),[()=>N("border-input bg-background selection:bg-primary dark:bg-input/30 selection:text-primary-foreground ring-offset-background placeholder:text-muted-foreground shadow-xs flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base outline-none transition-[color,box-shadow] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a.class)]),D(l,o=>s(o),()=>s()),X(l,c),b(i,l)};M(x,i=>{a.type==="file"?i(m):i(_,!1)})}b(e,t),F()}function Be(e,a){V(a,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let s=G(a,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];ye(e,be({name:"loader-circle"},()=>s,{get iconNode(){return c},children:(v,r)=>{var t=ae(),x=q(t);Ae(x,()=>a.children??ve),b(v,t)},$$slots:{default:!0}})),F()}var De=w("<!> <!>",1),Ne=w('<div><form><div class="flex flex-col gap-6"><div class="flex flex-col items-center gap-2"><a href="/" class="flex flex-col items-center gap-2 font-medium"><div class="flex size-8 items-center justify-center rounded-md"><!></div> <span class="sr-only">Afrog Security.</span></a> <h1 class="text-xl font-bold">Afrog Security.</h1> <div class="text-center text-sm"> </div></div> <div class="flex flex-col gap-6"><div class="grid gap-3"><!></div> <!></div></div></form></div>');function Ve(e,a){const s=me();V(a,!0);const[c,v]=xe(),r=()=>he(je,"$t",c);let t=L(a,"ref",15,null),x=G(a,["$$slots","$$events","$$legacy","ref","class"]),m=E(""),_=E(!1),i=E("");async function l(n){if(n.preventDefault(),!u(m).trim()){p(i,r()("please_enter_password"),!0);return}p(_,!0),p(i,"");try{const g=await Pe.login(u(m));g.success?($e(g.token),Le("/")):(p(i,g.message||r()("login_failed"),!0),p(i,r()("login_failed"),!0))}catch(g){g instanceof Se?p(i,g.message,!0):p(i,r()("login_failed"),!0)}finally{p(_,!1)}}var o=Ne();B(o,n=>({class:n,...x}),[()=>N("flex flex-col gap-6",a.class)]);var P=d(o),Q=d(P),S=d(Q),j=d(S),R=d(j),re=d(R);we(re,{class:"size-"}),f(R),ge(2),f(j);var T=$(j,4),te=d(T,!0);f(T),f(S);var W=$(S,2),A=d(W),se=d(A);{let n=K(()=>u(i)?"true":void 0),g=K(()=>r()("please_enter_password"));Me(se,{get"aria-invalid"(){return u(n)},get id(){return`password-${s}`},type:"password",required:!0,get disabled(){return u(_)},get placeholder(){return u(g)},get value(){return u(m)},set value(k){p(m,k,!0)}})}f(A);var ie=$(A,2);ke(ie,{type:"submit",class:"w-full",get disabled(){return u(_)},children:(n,g)=>{var k=De(),C=q(k);{var le=h=>{Be(h,{class:"size-4 animate-spin"})};M(C,h=>{u(_)&&h(le)})}var oe=$(C,2);{var ne=h=>{var H=pe();J(de=>O(H,de),[()=>r()("login")]),b(h,H)};M(oe,h=>{u(_)||h(ne)})}b(n,k)},$$slots:{default:!0}}),f(W),f(Q),f(P),f(o),D(o,n=>t(n),()=>t()),J(n=>O(te,n),[()=>r()("login_tip")]),_e("submit",P,l),b(e,o),F(),v()}var qe=w('<div class="bg-background flex flex-col items-center justify-end gap-6 p-6 md:p-10 mt-20"><div class="w-full max-w-sm"><!></div></div>');function Ye(e){var a=qe(),s=d(a),c=d(s);Ve(c,{}),f(s),f(a),b(e,a)}export{Ye as component};
