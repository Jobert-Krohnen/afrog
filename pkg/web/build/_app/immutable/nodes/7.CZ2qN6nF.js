import"../chunks/DsnmJJEf.js";import{p as V,D as R,a as U,F as at,b as v,c as q,j as rt,O as M,P as Q,f as p,g as r,u as B,d as e,s as n,r as t,Q as st,t as D,n as lt}from"../chunks/gImXwFS5.js";import{i as S}from"../chunks/BZPPLolU.js";import{s as ot,r as it,a as ct,b as ut}from"../chunks/mnke1pX0.js";import{b as mt}from"../chunks/KS0nAuSn.js";import{M as ft}from"../chunks/B4jnlOAU.js";import{M as pt}from"../chunks/DoI3k6ap.js";import{g as _t}from"../chunks/BY6sG8vk.js";import{a as xt}from"../chunks/uilTCriS.js";import{s as w}from"../chunks/BAizQVFW.js";import{I as nt,B as tt,e as gt}from"../chunks/CYIYZi4z.js";import{C as yt}from"../chunks/BatW6Hqp.js";import{s as dt}from"../chunks/DJzcF6JU.js";import{s as et}from"../chunks/D-qa5zPr.js";import{a as ht}from"../chunks/DTg-WVcN.js";const bt=!0,ie=Object.freeze(Object.defineProperty({__proto__:null,prerender:bt},Symbol.toStringTag,{value:"Module"})),wt=768;class Mt extends pt{constructor(a=wt){super(`max-width: ${a-1}px`)}}function jt(z,a){V(a,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let d=it(a,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];nt(z,ot({name:"eye"},()=>d,{get iconNode(){return c},children:(_,A)=>{var j=R(),m=U(j);dt(m,()=>a.children??at),v(_,j)},$$slots:{default:!0}})),q()}function Pt(z,a){V(a,!0);/**
 * @license @lucide/svelte v0.515.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let d=it(a,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];nt(z,ot({name:"eye-off"},()=>d,{get iconNode(){return c},children:(_,A)=>{var j=R(),m=U(j);dt(m,()=>a.children??at),v(_,j)},$$slots:{default:!0}})),q()}var kt=p('<span class="text-muted-foreground">未设置</span>'),zt=p('<div class="text-xs text-muted-foreground mt-1">已复制</div>'),Ct=p('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">API Key</div> <div class="flex items-center gap-1.5"><!> <!></div></div> <div class="mt-2 font-mono text-sm break-all select-text min-h-5"><!></div> <!></div></section>');function Et(z,a){V(a,!0);let d=Q(null),c=Q(!0),_=Q(!1);rt(()=>{if(typeof window>"u")return;(()=>{try{M(d,localStorage.getItem("api_key"),!0)}catch{M(d,null)}})();const o=h=>{h.key==="api_key"&&M(d,h.newValue,!0)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)});const A=B(()=>{if(!r(d))return"";if(!r(c))return r(d);const s=r(d).length,o=r(d).slice(Math.max(0,s-4));return"•".repeat(Math.max(0,s-4))+o});function j(){M(c,!r(c))}async function m(){if(r(d))try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(r(d));else{const s=document.createElement("textarea");s.value=r(d),s.style.position="fixed",s.style.left="-9999px",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s)}M(_,!0),setTimeout(()=>M(_,!1),1200)}catch{}}var C=Ct(),I=e(C),P=e(I),i=n(e(P),2),l=e(i);{let s=B(()=>r(c)?"显示":"隐藏"),o=B(()=>r(c)?"显示":"隐藏");tt(l,{variant:"ghost",size:"icon",class:"size-8",onclick:j,get title(){return r(s)},get"aria-label"(){return r(o)},children:(h,K)=>{var f=R(),T=U(f);{var u=b=>{jt(b,{class:"size-4"})},L=b=>{Pt(b,{class:"size-4"})};S(T,b=>{r(c)?b(u):b(L,!1)})}v(h,f)},$$slots:{default:!0}})}var x=n(l,2);tt(x,{variant:"ghost",size:"icon",class:"size-8",onclick:m,title:"复制","aria-label":"复制",children:(s,o)=>{yt(s,{class:"size-4"})},$$slots:{default:!0}}),t(i),t(P);var g=n(P,2),N=e(g);{var k=s=>{var o=st();D(()=>w(o,r(A))),v(s,o)},y=s=>{var o=kt();v(s,o)};S(N,s=>{r(d)?s(k):s(y,!1)})}t(g);var E=n(g,2);{var O=s=>{var o=zt();v(s,o)};S(E,s=>{r(_)&&s(O)})}t(I),t(C),v(z,C),q()}var At=p('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),It=p('<div class="text-destructive text-sm mt-2"> </div>'),Lt=p('<div class="mt-2 text-xs text-muted-foreground"> </div>'),St=p('<div class="mt-2 text-sm"><div class="flex items-center gap-2"><span class="text-muted-foreground">总数</span> <span class="font-medium"> </span></div> <div class="mt-3 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2"><div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Critical</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>High</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Medium</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Low</span><span class="font-mono"> </span></div> <div class="rounded-md border px-2 py-1 text-xs flex items-center justify-between"><span>Info</span><span class="font-mono"> </span></div></div> <!></div>'),Tt=p('<section class="mt-6"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">POC 统计</div></div> <!></div></section>');function Ot(z,a){V(a,!0);var d=Tt(),c=e(d),_=n(e(c),2);{var A=m=>{var C=At();v(m,C)},j=m=>{var C=R(),I=U(C);{var P=l=>{var x=It(),g=e(x,!0);t(x),D(()=>w(g,a.error)),v(l,x)},i=l=>{var x=St(),g=e(x),N=n(e(g),2),k=e(N,!0);t(N),t(g);var y=n(g,2),E=e(y),O=n(e(E)),s=e(O,!0);t(O),t(E);var o=n(E,2),h=n(e(o)),K=e(h,!0);t(h),t(o);var f=n(o,2),T=n(e(f)),u=e(T,!0);t(T),t(f);var L=n(f,2),b=n(e(L)),G=e(b,!0);t(b),t(L);var F=n(L,2),X=n(e(F)),Y=e(X,!0);t(X),t(F),t(y);var J=n(y,2);{var Z=H=>{var W=Lt(),$=e(W);t(W),D(()=>w($,`其他分类：${a.counts.other??""}`)),v(H,W)};S(J,H=>{a.counts.other>0&&H(Z)})}t(x),D(()=>{w(k,a.total),w(s,a.counts.critical),w(K,a.counts.high),w(u,a.counts.medium),w(G,a.counts.low),w(Y,a.counts.info)}),v(l,x)};S(I,l=>{a.error?l(P):l(i,!1)},!0)}v(m,C)};S(_,m=>{a.loading?m(A):m(j,!1)})}t(c),t(d),v(z,d),q()}var Kt=p('<div class="text-xs text-muted-foreground"> </div>'),Nt=p('<div class="text-muted-foreground text-sm mt-2">加载中…</div>'),Bt=p('<div class="text-destructive text-sm mt-2"> </div>'),Dt=p('<div class="text-muted-foreground text-sm mt-2">暂无数据</div>'),Ut=p('<li class="py-2"><div class="flex items-center justify-between gap-2"><div class="min-w-0"><div class="truncate text-sm font-medium"> </div> <div class="text-xs text-muted-foreground truncate"> </div></div> <div class="shrink-0 flex items-center gap-2"><span class="rounded-full border px-2 py-0.5 text-xs font-medium"> </span> <span class="text-xs text-muted-foreground"> </span></div></div></li>'),Ft=p('<ul class="mt-2 divide-y"></ul>'),Ht=p('<section class="mt-4"><div class="bg-card text-card-foreground rounded-lg border shadow-sm p-4"><div class="flex items-center justify-between"><div class="text-sm font-medium">最近更新</div> <!></div> <!></div></section>');function Qt(z,a){V(a,!0);function d(i){try{return new Date(i).toLocaleString()}catch{return i}}var c=Ht(),_=e(c),A=e(_),j=n(e(A),2);{var m=i=>{var l=Kt(),x=e(l);t(l),D(g=>w(x,`统计时间：${g??""}`),[()=>d(a.updatedAt)]),v(i,l)};S(j,i=>{a.updatedAt&&i(m)})}t(A);var C=n(A,2);{var I=i=>{var l=Nt();v(i,l)},P=i=>{var l=R(),x=U(l);{var g=k=>{var y=Bt(),E=e(y,!0);t(y),D(()=>w(E,a.error)),v(k,y)},N=k=>{var y=R(),E=U(y);{var O=o=>{var h=Dt();v(o,h)},s=o=>{var h=Ft();gt(h,21,()=>a.updates,K=>K.id,(K,f)=>{var T=Ut(),u=e(T),L=e(u),b=e(L),G=e(b,!0);t(b);var F=n(b,2),X=e(F,!0);t(F),t(L);var Y=n(L,2),J=e(Y),Z=e(J,!0);t(J);var H=n(J,2),W=e(H,!0);t(H),t(Y),t(u),t(T),D(($,vt)=>{et(b,"title",r(f).name),w(G,r(f).name),et(F,"title",r(f).path),w(X,r(f).path),w(Z,$),w(W,vt)},[()=>(r(f).severity||"").toString().toUpperCase(),()=>d(r(f).updated_at)]),v(K,T)}),t(h),v(o,h)};S(E,o=>{a.updates.length===0?o(O):o(s,!1)})}v(k,y)};S(x,k=>{a.error?k(g):k(N,!1)},!0)}v(i,l)};S(C,i=>{a.loading?i(I):i(P,!1)})}t(_),t(c),v(z,c),q()}var Rt=p('<!> <div class="flex flex-1 flex-col"><div class="container-wrapper section-soft flex-1 pb-6"><div class="container overflow-hidden"><!> <!> <!> <!></div></div></div>',1);function ne(z,a){V(a,!0);const[d,c]=ut(),_=()=>ct(mt,"$t",d),A=_()("website_title"),j=_()("website_description"),m=new Mt;function C(){xt.removeToken(),_t("/login",{replaceState:!0})}let I=Q(!1),P=Q(null),i=Q(null);const l=B(()=>r(i)?.by_severity??{critical:0,high:0,medium:0,low:0,info:0,other:0}),x=B(()=>r(i)?.total??0),g=B(()=>(r(i)?.recent_updates??[]).slice(0,5)),N=B(()=>r(i)?.updated_at??null);rt(()=>{typeof window>"u"||(M(I,!0),(async()=>{try{const u=await ht.loadPocsStats();u?.success&&u?.data?(M(i,u.data,!0),M(P,null)):(M(i,null),M(P,u?.message||"加载失败",!0))}catch(u){M(i,null),M(P,u?.message||"网络错误",!0)}finally{M(I,!1)}})())});var k=Rt(),y=U(k);ft(y,{get title(){return A},get description(){return j}});var E=n(y,2),O=e(E),s=e(O),o=e(s);{var h=u=>{tt(u,{variant:"outline",size:"sm",onclick:C,"aria-label":"Logout",children:(L,b)=>{lt();var G=st("退出");v(L,G)},$$slots:{default:!0}})};S(o,u=>{m.current||u(h)})}var K=n(o,2);Et(K,{});var f=n(K,2);Ot(f,{get loading(){return r(I)},get error(){return r(P)},get total(){return r(x)},get counts(){return r(l)}});var T=n(f,2);Qt(T,{get loading(){return r(I)},get error(){return r(P)},get updates(){return r(g)},get updatedAt(){return r(N)}}),t(s),t(O),t(E),v(z,k),q(),c()}export{ne as component,ie as universal};
